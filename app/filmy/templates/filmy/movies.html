{% extends 'filmy/base.html' %}

{% block 'title' %}Filmy | {{ block.super }}{% endblock %}

{% block 'content' %}

<div class="container my-5">
    <h1 class="mb-4" style="border-bottom: 4px solid #ff450c; display: inline-block;">FILMY</h1>

    <h3 class="mb-3 fw-normal fst-italic mt-3" style="color: #ff5d0c;">Názvy filmů:</h2>

        <ul class="list-group w-auto">
            {% for movie in movies %}
            <li class="list-group-item">{{ movie.name }}</li>
            {% empty %}
            <li class="list-group-item text-muted">Žádné filmy nebyly zatím přidány.</li>
            {% endfor %}
        </ul>

        <div class="row mt-5">
            <form method="get" action="./">
                <div class="input-group mb-3">
                    <input type="text" name="search" value="{{ search|default:"" }}" class="form-control"
                        placeholder="Vyhledat film ..." aria-label="Hledat" aria-describedby="button-addon2">
                    <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Hledat</button>
                </div>
            </form>
        </div>

        <div class="row">
            <ul class="list-inline">
                <li class="list-inline-item">
                    <a class="btn {% if not genre %}btn-danger{% else %}btn-outline-secondary{% endif %}"
                        href="./">Všechno</a>
                </li>
                {% for g in genres %}
                <li class="list-inline-item">
                    <a class="btn {% if g.name == genre %}btn-danger{% else %}btn-outline-secondary {% endif %} d-block mb-3"
                        href="./?genre={{ g.name }}">{{ g.name }}</a>
                </li>
                {% endfor %}
            </ul>
        </div>


        <div class="row row-cols-1  row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-3">

            {% for movie in movies %}

            <div class="col">

                <div id="card" class="card h-100 shadow border-0">

                    <img class="card-img-top" style="height: 350px; aspect-ratio: 2 / 3; object-fit: cover;"
                        src="{% if movie.main_picture %}{{ movie.main_picture }}{% else %}//place-hold.it/180x100/{% endif %}"
                        alt="Foto filmu">

                    <div class="card-body d-flex flex-column">

                        <!-- Název -->
                        <h5 class="card-title fw-bold mb-1">
                        
                            <a href="{% url 'movie' movie.id %}" style="color: #1f2933; text-decoration: none;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">
                                {{ movie.name }}
                            </a>

                            <br>
                                <span class="text-muted fw-normal d-block text-end">[{{ movie.year }}]</span>
                        </h5>

                        <!-- Režie -->
                        {% if movie.director %}
                        <p class="mb-1 regular text-muted">
                             <strong>Režie:</strong> {{ movie.director }}
                        </p>
                        {% endif %}

                        <!-- Herci -->
                        <p class="mb-2 regular text-muted" style="min-height: 45px; ">
                             <strong>Herci:</strong>
                            {% for actor in movie.actors.all %}
                            {{ actor.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                        
                        <!-- Žánry -->
                        <div class="mb-3">
                            {% for genre in movie.genres.all %}
                            <span class="badge badge-genre me-1 mb-1">
                                {{ genre.name }}
                            </span>
                            {% endfor %}
                        </div>
                        
                        <!-- Popis -->
                        <p class="card-text text-body-tertiary small mb-3">
                            {{ movie.description|truncatewords_html:15 }}
                        </p>
                        
                        </div>
                </div>


            </div>

            {% endfor %}

        </div>

</div>


{% endblock %}